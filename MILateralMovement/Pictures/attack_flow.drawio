<mxfile host="Electron" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="Page-1" id="rgoifs3ZljmMPXztfOOy">
    <mxGraphModel dx="3420" dy="2727" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-3" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="540" width="350" x="-40" y="45" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-4" parent="1" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/general/Resource_Groups.svg;" value="" vertex="1">
          <mxGeometry height="50" width="53.13" y="60" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-5" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;b&gt;ResourceGroup1&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="50" width="170" x="53.129999999999995" y="60" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-6" parent="1" style="verticalLabelPosition=bottom;html=1;verticalAlign=top;align=center;strokeColor=none;fillColor=#00BEF2;shape=mxgraph.azure.virtual_machine_feature;pointerEvents=1;" value="" vertex="1">
          <mxGeometry height="70" width="70" x="-16.87" y="320" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-7" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="lower-powervm" vertex="1">
          <mxGeometry height="30" width="90" x="-20" y="390" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-8" parent="1" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/identity/Managed_Identities.svg;" value="" vertex="1">
          <mxGeometry height="50" width="51.52" x="-7.629999999999985" y="-99.55999999999997" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-9" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="System Assigned" vertex="1">
          <mxGeometry height="30" width="108.13" x="-40" y="-49.56" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-10" parent="1" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Person.svg;" value="" vertex="1">
          <mxGeometry height="60" width="44.4" x="145.93" y="640" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-11" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;vm-user@az.floralbask.com&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="230" x="53.129999999999995" y="710" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-14" edge="1" parent="1" source="R9pbtyXSmO0g2fZvBOf1-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=-0.006;entryY=0.48;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0000;" target="R9pbtyXSmO0g2fZvBOf1-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-130" y="355" />
              <mxPoint x="-130" y="-76" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-15" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" value="" vertex="1">
          <mxGeometry height="540" width="390" x="534" y="45" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-16" parent="1" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/general/Resource_Groups.svg;" value="" vertex="1">
          <mxGeometry height="57" width="60.56" x="580" y="53" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-17" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;b&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;ResourceGroup2&lt;/font&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="170" x="650" y="60" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-18" parent="1" style="verticalLabelPosition=bottom;html=1;verticalAlign=top;align=center;strokeColor=none;fillColor=#00BEF2;shape=mxgraph.azure.virtual_machine_feature;pointerEvents=1;" value="" vertex="1">
          <mxGeometry height="70" width="80" x="670" y="430" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-20" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="powerful-vm" vertex="1">
          <mxGeometry height="40" width="120" x="650" y="500" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-23" parent="1" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/identity/Entra_Managed_Identities.svg;" value="" vertex="1">
          <mxGeometry height="60.440000000000005" width="68" x="960" y="-110" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-24" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="User Assigned (keyvaultuser)" vertex="1">
          <mxGeometry height="30" width="140" x="924" y="-40" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-26" edge="1" parent="1" source="R9pbtyXSmO0g2fZvBOf1-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.985;entryY=0.364;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0000;" target="R9pbtyXSmO0g2fZvBOf1-23">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1230" y="465" />
              <mxPoint x="1230" y="-88" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-27" parent="1" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/security/Key_Vaults.svg;" value="" vertex="1">
          <mxGeometry height="70" width="70" x="620" y="200" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-28" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;importantkeyvault&lt;/font&gt;" vertex="1">
          <mxGeometry height="40" width="130" x="590" y="280" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-29" edge="1" parent="1" source="R9pbtyXSmO0g2fZvBOf1-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.014;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#e51400;strokeColor=#FF0000;" target="R9pbtyXSmO0g2fZvBOf1-27">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1080" y="-25" />
              <mxPoint x="1080" y="228" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-32" edge="1" parent="1" source="R9pbtyXSmO0g2fZvBOf1-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#e51400;strokeColor=#FF0000;" target="R9pbtyXSmO0g2fZvBOf1-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="420" y="-75" />
              <mxPoint x="420" y="465" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-33" edge="1" parent="1" source="R9pbtyXSmO0g2fZvBOf1-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.07;entryY=0.414;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF0000;" target="R9pbtyXSmO0g2fZvBOf1-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="670" />
              <mxPoint x="260" y="349" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-34" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Virtual Machine Contributor&lt;/font&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="40" width="130" x="80" y="300" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-35" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Virtual Machine Contributor&lt;/font&gt;&lt;/b&gt;" vertex="1">
          <mxGeometry height="49.56" width="190" x="120" y="-129.56" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-36" parent="1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" value="&lt;b&gt;Key Vault Administrator&lt;/b&gt;" vertex="1">
          <mxGeometry height="50" width="170" x="930" y="230" as="geometry" />
        </mxCell>
        <mxCell id="R9pbtyXSmO0g2fZvBOf1-38" parent="1" style="swimlane;startSize=0;labelBackgroundColor=#FFFFFF;fontColor=#000000;labelBorderColor=#FFFFFF;strokeColor=#000000;" value="" vertex="1">
          <mxGeometry height="1050" width="1740" x="-300" y="-260" as="geometry" />
        </mxCell>
        <mxCell id="C4G3KuveuCAk8O88hx12-1" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="Attacker requests access token for user" vertex="1">
          <mxGeometry height="70" width="120" x="570" y="850" as="geometry" />
        </mxCell>
        <mxCell id="C4G3KuveuCAk8O88hx12-3" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=15;" value="Executes code on the VM" vertex="1">
          <mxGeometry height="30" width="60" x="385" y="640" as="geometry" />
        </mxCell>
        <mxCell id="06xXU5nusg55A89PVbZV-4" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=15;" value="Obtains access token of the Managed Identity" vertex="1">
          <mxGeometry height="90" width="70" x="80" y="300" as="geometry" />
        </mxCell>
        <mxCell id="06xXU5nusg55A89PVbZV-5" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;Lists Keys and KeyVaults using access token&lt;/font&gt;" vertex="1">
          <mxGeometry height="90" width="80" x="1390" y="290" as="geometry" />
        </mxCell>
        <mxCell id="06xXU5nusg55A89PVbZV-14" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=15;" value="Executes Code on the powerful-vm" vertex="1">
          <mxGeometry height="100" width="140" x="740" y="170" as="geometry" />
        </mxCell>
        <mxCell id="06xXU5nusg55A89PVbZV-16" parent="R9pbtyXSmO0g2fZvBOf1-38" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;fontSize=15;" value="Requests access token for the Managed Identity" vertex="1">
          <mxGeometry height="80" width="180" x="1280" y="730" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
